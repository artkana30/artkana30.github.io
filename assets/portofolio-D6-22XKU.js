import{G as he,M as ve,c as o,j as me,b,O as pe,k as be,o as $e,l as _e,m as w,t as d,u as v,i as c,d as s,F as P,n as Le,f as D,p as ye,e as y,L as Ce,q as Ee,s as k,S as xe,r as Se}from"./index-I1ftFl3J.js";import{D as G}from"./displayError-C8SSe6sU.js";const $=6;var Pe=d("<ul class=filter-list><li class=filter-item><button type=button class=active>All"),ke=d("<div class=filter-select-box><button type=button class=filter-select><div class=select-value>Select category</div><div class=select-icon></div></button><ul class=select-list><li class=select-item><button type=button>All"),Me=d("<li class=filter-item><button type=button>"),je=d("<li class=select-item><button type=button>"),Ae=d("<div class=pagination><button type=button>Previous</button><button type=button>Next"),Re=d("<button type=button>"),Ie=d("<ul class=project-list>"),Te=d('<article class="portofolio active"><header><h2 class="h2 article-title"></h2></header><section class=projects>'),Fe=d('<li class="project-item active"><a target=_blank rel="noopener noreferrer"><figure class=project-img><div class=project-item-icon-box></div><img loading=lazy class=project-border-img></figure><h3 class=project-title></h3><p class=project-category>',!0,!1);function Ge(){const{repos:g}=he.useGithub(),{updateTitle:Y}=ve.useMeta(),[C,Z]=o([]),[m,ee]=o([]),[p,te]=o(1),[M,j]=o(1),[re,le]=o(!0),[N,A]=o([]),[O,B]=me({select:!1,filter:!1});let R;const[E,ne]=o([]),[h,se]=o([]),[I,T]=o(null),[x,ie]=o(null),[U,ae]=o(null),[z,ce]=o(null);b(()=>{if(g.loading||g.error)return;const e=g()?.map(t=>t.topics).flat();Z([...new Set(e)]);const r=g()?.map(t=>({name:t.name,url:t.html_url,topics:t.topics,openGraphImageUrl:`${pe}/${t.name}`}));ee(r||[])}),b(()=>{const e=(p()-1)*$,r=e+$;A(m().slice(e,r)),j(Math.ceil(m().length/$))});const S=e=>{te(e)},H=e=>{e&&!E().includes(e)&&ne([...E(),e])},V=e=>{e&&!h().includes(e)&&se([...h(),e])},oe=e=>{e&&!x()?.includes(e)&&ie([...x()||[],e])},q=(e,r)=>{r!==null&&r.forEach(t=>{if(S(1),e==="All")t.classList.add("active"),j(Math.ceil(m().length/$)),A(m().slice(0,$));else{(t.getAttribute("data-category")||"").split(", ").includes(e)?t.classList.add("active"):t.classList.remove("active");const l=m().filter(a=>a.topics.includes(e));j(Math.ceil(l.length/$)),A(l)}})};b(()=>{I()===null&&h().length!==0&&T(h()[0])}),b(()=>{const e=z();e!==null&&(e.addEventListener("click",()=>{e.classList.toggle("active")}),R=new MutationObserver(r=>{r.forEach(t=>{const n=t.target.textContent;(t.type==="characterData"||t.type==="childList")&&n!=="Select category"&&e.innerText!=="Select category"&&be.success(`Filter changed to ${n}`)})}),R.observe(e,{childList:!0,subtree:!0,characterData:!0}))}),b(()=>{if(O.select||C().length===0)return;const e=U();if(e===null)return;const r=x();r!==null&&(E().forEach(t=>{t.addEventListener("click",()=>{e.innerText=t.textContent||"Select category",z()?.classList.remove("active"),I()?.classList.remove("active"),q(t.textContent||"All",r),h().forEach(n=>{n.textContent===t.textContent&&(n.classList.add("active"),T(n))})})}),B("select",!0))}),b(()=>{if(O.filter||C().length===0)return;const e=U();if(e===null)return;const r=x();r!==null&&(h().forEach(t=>{t.addEventListener("click",()=>{e.innerText=t.textContent||"Select category",q(t.textContent||"All",r),I()?.classList.remove("active"),t.classList.toggle("active"),T(t)})}),B("filter",!0))}),$e(()=>{Y("Portofolio"),setTimeout(()=>{le(!1)},200)}),_e(()=>{R.disconnect(),E().forEach(e=>e.removeEventListener("click",()=>{})),h().forEach(e=>e.removeEventListener("click",()=>{}))});const ue=w(()=>{const e=g();return!e||e.length===0?"Portofolio":`Portofolio (${e.length} Data)`}),de=w(()=>[(()=>{var e=Pe(),r=e.firstChild,t=r.firstChild;return v(V,t),c(e,s(P,{get each(){return C()},children:n=>(()=>{var i=Me(),l=i.firstChild;return v(V,l),c(l,n),i})()}),null),e})(),(()=>{var e=ke(),r=e.firstChild,t=r.firstChild,n=t.nextSibling,i=r.nextSibling,l=i.firstChild,a=l.firstChild;return v(f=>ce(f),r),v(f=>ae(f),t),c(n,s(Le,{})),v(H,a),c(i,s(P,{get each(){return C()},children:f=>(()=>{var _=je(),L=_.firstChild;return v(H,L),c(L,f),_})()}),null),e})()]),fe=w(()=>(()=>{var e=Ae(),r=e.firstChild,t=r.nextSibling;return r.$$click=()=>S(Math.max(1,p()-1)),c(e,s(P,{get each(){return Array.from({length:M()})},children:(n,i)=>{const l=i()+1;return(()=>{var a=Re();return a.$$click=()=>S(l),c(a,l),D(()=>ye(a,p()===l?"active":"")),a})()}}),t),t.$$click=()=>S(Math.min(M(),p()+1)),D(n=>{var i=p()===1,l=p()===M();return i!==n.e&&(r.disabled=n.e=i),l!==n.t&&(t.disabled=n.t=l),n},{e:void 0,t:void 0}),e})());return(()=>{var e=Te(),r=e.firstChild,t=r.firstChild,n=r.nextSibling;return c(t,ue),c(n,s(xe,{get children(){return[s(y,{get when(){return g.loading||re()},get children(){return s(Ce,{})}}),s(y,{get when(){return g.error},get children(){return s(G,{message:"Failed to fetch data"})}}),s(y,{get when(){return m().length===0},get children(){return s(G,{message:"No data available"})}}),s(y,{get when(){return N().length===0},get children(){return s(G,{message:"No data available"})}}),s(y,{when:!0,get children(){return[s(de,{}),(()=>{var i=Ie();return c(i,s(P,{get each(){return N()},children:l=>(()=>{var a=Fe(),f=a.firstChild,_=f.firstChild,L=_.firstChild,F=L.nextSibling,J=_.nextSibling,ge=J.nextSibling;return v(oe,a),c(L,s(Ee,{})),F.addEventListener("error",u=>u.currentTarget.src=""),c(J,()=>l.name.split("-").join(" ")),c(ge,()=>l.topics.join(", ")),D(u=>{var K=l.topics.join(", "),Q=l.url,W=l.openGraphImageUrl,X=l.name;return K!==u.e&&k(a,"data-category",u.e=K),Q!==u.t&&k(f,"href",u.t=Q),W!==u.a&&k(F,"src",u.a=W),X!==u.o&&k(F,"alt",u.o=X),u},{e:void 0,t:void 0,a:void 0,o:void 0}),a})()})),i})(),s(fe,{})]}})]}})),e})()}Se(["click"]);export{Ge as default};

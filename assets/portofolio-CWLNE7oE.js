import{G as de,M as fe,c as f,j as he,b as y,O as ge,k as ve,o as me,l as pe,m as be,t as v,i as d,d as s,e as E,L as $e,u as $,F as j,n as _e,p as Le,f as G,s as A,q as ye,S as Ce,r as Ee}from"./index-Cqqm3Omd.js";import{D as N}from"./displayError-BxijuXt6.js";const C=6;var xe=v("<ul class=filter-list><li class=filter-item><button type=button class=active>All"),Se=v("<div class=filter-select-box><button type=button class=filter-select><div class=select-value>Select category</div><div class=select-icon></div></button><ul class=select-list><li class=select-item><button type=button>All"),ke=v("<ul class=project-list>"),Me=v("<div class=pagination><button type=button>Previous</button><button type=button>Next"),Pe=v('<article class="portofolio active"><header><h2 class="h2 article-title"></h2></header><section class=projects>'),je=v("<li class=filter-item><button type=button>"),Ae=v("<li class=select-item><button type=button>"),Re=v('<li class="project-item active"><a target=_blank rel="noopener noreferrer"><figure class=project-img><div class=project-item-icon-box></div><img loading=lazy class=project-border-img></figure><h3 class=project-title></h3><p class=project-category>',!0,!1),Ie=v("<button type=button>");function De(){const{repos:p}=de.useGithub(),{updateTitle:Y}=fe.useMeta(),[x,Z]=f([]),[_,ee]=f([]),[L,te]=f(1),[R,I]=f(1),[le,re]=f(!0),[O,T]=f([]),[B,U]=he({select:!1,filter:!1});let w;const[S,se]=f([]),[b,ne]=f([]),[D,F]=f(null),[k,ie]=f(null),[z,ae]=f(null),[H,ce]=f(null);y(()=>{if(p.loading||p.error)return;const e=p()?.map(t=>t.topics).flat();Z([...new Set(e)]);const r=p()?.map(t=>({name:t.name,url:t.html_url,topics:t.topics,openGraphImageUrl:`${ge}/${t.name}`}));ee(r||[])}),y(()=>{const e=(L()-1)*C,r=e+C;T(_().slice(e,r)),I(Math.ceil(_().length/C))});const M=e=>{te(e)},V=e=>{e&&!S().includes(e)&&se([...S(),e])},q=e=>{e&&!b().includes(e)&&ne([...b(),e])},oe=e=>{e&&!k()?.includes(e)&&ie([...k()||[],e])},J=(e,r)=>{r!==null&&r.forEach(t=>{if(M(1),e==="All")t.classList.add("active"),I(Math.ceil(_().length/C)),T(_().slice(0,C));else{(t.getAttribute("data-category")||"").split(", ").includes(e)?t.classList.add("active"):t.classList.remove("active");const l=_().filter(n=>n.topics.includes(e));I(Math.ceil(l.length/C)),T(l)}})};y(()=>{D()===null&&b().length!==0&&F(b()[0])}),y(()=>{const e=H();e!==null&&(e.addEventListener("click",()=>{e.classList.toggle("active")}),w=new MutationObserver(r=>{r.forEach(t=>{const g=t.target.textContent;(t.type==="characterData"||t.type==="childList")&&g!=="Select category"&&e.innerText!=="Select category"&&ve.success(`Filter changed to ${g}`)})}),w.observe(e,{childList:!0,subtree:!0,characterData:!0}))}),y(()=>{if(B.select||x().length===0)return;const e=z();if(e===null)return;const r=k();r!==null&&(S().forEach(t=>{t.addEventListener("click",()=>{e.innerText=t.textContent||"Select category",H()?.classList.remove("active"),D()?.classList.remove("active"),J(t.textContent||"All",r),b().forEach(g=>{g.textContent===t.textContent&&(g.classList.add("active"),F(g))})})}),U("select",!0))}),y(()=>{if(B.filter||x().length===0)return;const e=z();if(e===null)return;const r=k();r!==null&&(b().forEach(t=>{t.addEventListener("click",()=>{e.innerText=t.textContent||"Select category",J(t.textContent||"All",r),D()?.classList.remove("active"),t.classList.toggle("active"),F(t)})}),U("filter",!0))}),me(()=>{Y("Portofolio"),setTimeout(()=>{re(!1)},200)}),pe(()=>{w.disconnect(),S().forEach(e=>e.removeEventListener("click",()=>{})),b().forEach(e=>e.removeEventListener("click",()=>{}))});const ue=be(()=>{const e=p();return!e||e.length===0?"Portofolio":`Portofolio (${e.length} Data)`});return(()=>{var e=Pe(),r=e.firstChild,t=r.firstChild,g=r.nextSibling;return d(t,ue),d(g,s(Ce,{get children(){return[s(E,{get when(){return p.loading||le()},get children(){return s($e,{})}}),s(E,{get when(){return p.error},get children(){return s(N,{message:"Failed to fetch data"})}}),s(E,{get when(){return _().length===0},get children(){return s(N,{message:"No data available"})}}),s(E,{get when(){return O().length===0},get children(){return s(N,{message:"No data available"})}}),s(E,{when:!0,get children(){return[(()=>{var i=xe(),l=i.firstChild,n=l.firstChild;return $(q,n),d(i,s(j,{get each(){return x()},children:o=>(()=>{var u=je(),a=u.firstChild;return $(q,a),d(a,o),u})()}),null),i})(),(()=>{var i=Se(),l=i.firstChild,n=l.firstChild,o=n.nextSibling,u=l.nextSibling,a=u.firstChild,h=a.firstChild;return $(m=>ce(m),l),$(m=>ae(m),n),d(o,s(_e,{})),$(V,h),d(u,s(j,{get each(){return x()},children:m=>(()=>{var P=Ae(),c=P.firstChild;return $(V,c),d(c,m),P})()}),null),i})(),(()=>{var i=ke();return d(i,s(j,{get each(){return O()},children:l=>(()=>{var n=Re(),o=n.firstChild,u=o.firstChild,a=u.firstChild,h=a.nextSibling,m=u.nextSibling,P=m.nextSibling;return $(oe,n),d(a,s(Le,{})),h.addEventListener("error",c=>c.currentTarget.src=""),d(m,()=>l.name.split("-").join(" ")),d(P,()=>l.topics.join(", ")),G(c=>{var K=l.topics.join(", "),Q=l.url,W=l.openGraphImageUrl,X=l.name;return K!==c.e&&A(n,"data-category",c.e=K),Q!==c.t&&A(o,"href",c.t=Q),W!==c.a&&A(h,"src",c.a=W),X!==c.o&&A(h,"alt",c.o=X),c},{e:void 0,t:void 0,a:void 0,o:void 0}),n})()})),i})(),(()=>{var i=Me(),l=i.firstChild,n=l.nextSibling;return l.$$click=()=>M(Math.max(1,L()-1)),d(i,s(j,{get each(){return Array.from({length:R()})},children:(o,u)=>{const a=u()+1;return(()=>{var h=Ie();return h.$$click=()=>M(a),d(h,a),G(()=>ye(h,L()===a?"active":"")),h})()}}),n),n.$$click=()=>M(Math.min(R(),L()+1)),G(o=>{var u=L()===1,a=L()===R();return u!==o.e&&(l.disabled=o.e=u),a!==o.t&&(n.disabled=o.t=a),o},{e:void 0,t:void 0}),i})()]}})]}})),e})()}Ee(["click"]);export{De as default};
